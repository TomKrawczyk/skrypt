<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktywny Skrypt Rozmowy - Zdrowe Mieszkanie+ by 4-eco</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; background: linear-gradient(to bottom right, #eff6ff, #f0fdf4, #ecfdf5); }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .card { background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 24px; margin-bottom: 24px; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .progress { display: flex; align-items: center; gap: 8px; font-size: 12px; margin-bottom: 20px; }
        .step { padding: 4px 8px; border-radius: 20px; background: #e5e7eb; color: #6b7280; }
        .step.active { background: #10b981; color: white; }
        .button { padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; justify-content: center; width: 100%; margin-bottom: 12px; }
        .button.primary { background: #10b981; color: white; }
        .button.primary:hover { background: #059669; }
        .button.secondary { background: #6b7280; color: white; }
        .button.secondary:hover { background: #4b5563; }
        .button.danger { background: #ef4444; color: white; }
        .button.danger:hover { background: #dc2626; }
        .input { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px; margin-bottom: 12px; }
        .checkbox { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .tip { background: #fef3c7; border-left: 4px solid #f59e0b; padding: 12px; border-radius: 6px; margin: 12px 0; }
        .script { background: #f3f4f6; padding: 16px; border-radius: 6px; margin: 12px 0; font-style: italic; }
        .history { max-height: 200px; overflow-y: auto; background: #f9fafb; padding: 12px; border-radius: 6px; }
        .history-item { font-size: 12px; margin-bottom: 4px; color: #6b7280; }
        .notes { height: 120px; resize: vertical; }
        .icon { width: 20px; height: 20px; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useMemo } = React;
        const { Phone, ChevronRight, Calculator, AlertCircle, CheckCircle, RefreshCw, MessageSquare, Clock, Target, Home, DollarSign, User } = lucide;

        const InteractiveCallScript = () => {
            const [stage, setStage] = useState('start');
            const [subStage, setSubStage] = useState('');
            const [contactType, setContactType] = useState('');
            const [clientProfile, setClientProfile] = useState('');
            const [notes, setNotes] = useState('');
            const [clientData, setClientData] = useState({
                name: '', propertyType: '', area: '', monthlyBill: '', problems: []
            });
            const [history, setHistory] = useState([]);
            const [showCalculator, setShowCalculator] = useState(false);

            const calculations = useMemo(() => {
                const area = parseFloat(clientData.area) || 0;
                const bill = parseFloat(clientData.monthlyBill) || 0;
                const rekuperatorCount = area <= 80 ? 1 : area <= 120 ? 2 : area <= 180 ? 3 : 4;
                const rekuperatorCost = 2800 + (rekuperatorCount - 1) * 3200;
                const pscLiters = area * 0.33;
                const pscCost = pscLiters * 110;
                const totalKomfort = rekuperatorCost + pscCost + 2000;
                const savings = bill * 0.3;
                const annualSavings = savings * 12;
                const roi = totalKomfort / annualSavings || 0;
                return { rekuperatorCount, rekuperatorCost, pscCost, totalKomfort, savings, annualSavings, roi, pscLiters };
            }, [clientData.area, clientData.monthlyBill]);

            const addToHistory = (action) => setHistory([...history, { time: new Date().toLocaleTimeString(), action }]);

            const goToStage = (newStage, sub = '', action = '') => {
                setStage(newStage);
                setSubStage(sub);
                if (action) addToHistory(action);
            };

            const StartScreen = () => (
                <div className="card">
                    <div className="text-center">
                        <Phone className="mx-auto mb-4" style={{ width: '64px', height: '64px', color: '#10b981' }} />
                        <h2 className="text-3xl font-bold mb-2">Zdrowe Mieszkanie+</h2>
                        <p className="text-gray-600">Interaktywny Skrypt Rozmowy</p>
                    </div>
                    <div className="tip">
                        <p><strong>ğŸ¯ Cel rozmowy:</strong></p>
                        <ul>
                            <li>âœ… GÅ‚Ã³wny: UmÃ³wiÄ‡ spotkanie diagnostyczne</li>
                            <li>âœ… Idealny: BezpoÅ›rednie zamkniÄ™cie sprzedaÅ¼y</li>
                            <li>âœ… Minimalny: PozostawiÄ‡ kontakt na przyszÅ‚oÅ›Ä‡</li>
                        </ul>
                    </div>
                    <div>
                        <label className="block font-semibold mb-2">1. Typ kontaktu:</label>
                        <div className="grid grid-cols-2 gap-3">
                            <button onClick={() => { setContactType('warm'); goToStage('profile', '', 'Wybrano kontakt ciepÅ‚y'); }} className="button secondary">
                                â˜€ï¸ CiepÅ‚y
                            </button>
                            <button onClick={() => { setContactType('cold'); goToStage('profile', '', 'Wybrano kontakt zimny'); }} className="button secondary">
                                â„ï¸ Zimny
                            </button>
                        </div>
                    </div>
                </div>
            );

            const ProfileScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4">2. Profil Klienta</h3>
                    <p className="text-gray-600 mb-4">Wybierz typ klienta (moÅ¼esz zmieniÄ‡ pÃ³Åºniej):</p>
                    <div className="grid grid-cols-2 gap-4">
                        <button onClick={() => { setClientProfile('family'); goToStage('opening-warm', '', 'Profil: MÅ‚oda rodzina'); }} className="button secondary p-4 text-left">
                            <div className="font-semibold mb-2">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ MÅ‚oda Rodzina</div>
                            <div className="text-sm text-gray-600">Dzieci z alergiÄ…, wilgoÄ‡, zapachy</div>
                        </button>
                        <button onClick={() => { setClientProfile('senior'); goToStage('opening-warm', '', 'Profil: Senior'); }} className="button secondary p-4 text-left">
                            <div className="font-semibold mb-2">ğŸ‘´ Senior</div>
                            <div className="text-sm text-gray-600">Wysokie rachunki, emerytura</div>
                        </button>
                        <button onClick={() => { setClientProfile('eco'); goToStage('opening-warm', '', 'Profil: Åšwiadomy ekologicznie'); }} className="button secondary p-4 text-left">
                            <div className="font-semibold mb-2">ğŸŒ± Åšwiadomy Ekologicznie</div>
                            <div className="text-sm text-gray-600">Ekologia, wartoÅ›Ä‡ nieruchomoÅ›ci</div>
                        </button>
                        <button onClick={() => { setClientProfile('skeptic'); goToStage('opening-warm', '', 'Profil: Sceptyk'); }} className="button secondary p-4 text-left">
                            <div className="font-semibold mb-2">ğŸ¤” Sceptyk</div>
                            <div className="text-sm text-gray-600">Nie wierzy w obietnice</div>
                        </button>
                    </div>
                </div>
            );

            const OpeningWarmScreen = () => {
                const hooks = {
                    family: "Pomagamy rodzinom pozbyÄ‡ siÄ™ problemu z wilgociÄ…, pleÅ›niÄ… i alergenami - szczegÃ³lnie waÅ¼ne dla dzieci z alergiÄ….",
                    senior: "Pomagamy obniÅ¼yÄ‡ rachunki za ogrzewanie nawet o 30% - to Å›rednio 2000-3000 zÅ‚ oszczÄ™dnoÅ›ci rocznie.",
                    eco: "Pomagamy zmniejszyÄ‡ Å›lad wÄ™glowy domu i zwiÄ™kszyÄ‡ jego wartoÅ›Ä‡ rynkowÄ… o 10-15%.",
                    skeptic: "Realizujemy wÅ‚aÅ›nie projekty termomodernizacyjne w PaÅ„stwa okolicy z gwarancjÄ… efektywnoÅ›ci na piÅ›mie."
                };
                return (
                    <div className="card">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-2xl font-bold">3a. Otwarcie - CiepÅ‚y Kontakt</h3>
                            <span className="text-sm bg-gray-100 px-3 py-1 rounded-full">â±ï¸ 10s</span>
                        </div>
                        <div className="script">
                            <strong>"DzieÅ„ dobry, nazywam siÄ™ [Twoje ImiÄ™] z firmy 4-eco. DzwoniÄ™ w sprawie programu Zdrowe Mieszkanie Plus. Czy to dobry moment na krÃ³tkÄ… rozmowÄ™?"</strong>
                            <br /><br />[PAUZA] {hooks[clientProfile]}
                        </div>
                        <div className="tip">
                            <ul>
                                <li>â€¢ UÅ›miechnij siÄ™ - sÅ‚ychaÄ‡ to!</li>
                                <li>â€¢ Poczekaj na odpowiedÅº</li>
                            </ul>
                        </div>
                        <button onClick={() => goToStage('qualification-name', '', 'Klient zgodziÅ‚ siÄ™')} className="button primary">âœ… "Ok, mÃ³w"</button>
                        <button onClick={() => goToStage('objection-time', '', 'Obiekcja: Nie mam czasu')} className="button danger">â° "Nie mam czasu"</button>
                        <button onClick={() => goToStage('objection-interest', '', 'Obiekcja: Nie interesuje')} className="button danger">âŒ "Nie interesuje mnie"</button>
                    </div>
                );
            };

            const OpeningColdScreen = () => {
                const hooks = {
                    family: "Pomagamy rodzinom pozbyÄ‡ siÄ™ problemu z wilgociÄ…, pleÅ›niÄ… i alergenami - szczegÃ³lnie waÅ¼ne dla dzieci z alergiÄ….",
                    senior: "Pomagamy obniÅ¼yÄ‡ rachunki za ogrzewanie nawet o 30% - to Å›rednio 2000-3000 zÅ‚ oszczÄ™dnoÅ›ci rocznie.",
                    eco: "Pomagamy zmniejszyÄ‡ Å›lad wÄ™glowy domu i zwiÄ™kszyÄ‡ jego wartoÅ›Ä‡ rynkowÄ… o 10-15%.",
                    skeptic: "Realizujemy wÅ‚aÅ›nie projekty termomodernizacyjne w PaÅ„stwa okolicy z gwarancjÄ… efektywnoÅ›ci na piÅ›mie."
                };
                return (
                    <div className="card">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-2xl font-bold">3b. Otwarcie - Zimny Kontakt</h3>
                            <span className="text-sm bg-gray-100 px-3 py-1 rounded-full">â±ï¸ 15s</span>
                        </div>
                        <div className="script">
                            <strong>"DzieÅ„ dobry, mÃ³wi [Twoje ImiÄ™] z firmy 4-eco. Czy rozmawiam z Panem/PaniÄ… [Nazwisko]?"</strong>
                            <br /><br />[Potwierdzenie] <strong>"Åšwietnie! DzwoniÄ™, poniewaÅ¼ aktualnie realizujemy w PaÅ„stwa rejonie program Zdrowe Mieszkanie Plus. {hooks[clientProfile]} Czy to dobry moment na 2-minutowÄ… rozmowÄ™?"</strong>
                        </div>
                        <div className="tip">
                            <ul>
                                <li>â€¢ BÄ…dÅº entuzjastyczny</li>
                                <li>â€¢ JeÅ›li "nie" - obsÅ‚uguj obiekcjÄ™</li>
                            </ul>
                        </div>
                        <button onClick={() => goToStage('qualification-name', '', 'Klient zgodziÅ‚ siÄ™')} className="button primary">âœ… "Tak, sÅ‚ucham"</button>
                        <button onClick={() => goToStage('objection-time', '', 'Obiekcja: Nie mam czasu')} className="button danger">â° "Nie mam czasu"</button>
                        <button onClick={() => goToStage('objection-interest', '', 'Obiekcja: Nie interesuje')} className="button danger">âŒ "Nie interesuje mnie"</button>
                    </div>
                );
            };

            // Rozbita kwalifikacja na podetapy
            const QualificationNameScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4">4a. Kwalifikacja - ImiÄ™ i Nazwisko</h3>
                    <p className="mb-4">ğŸ’¬ ZAPYTAJ: "Jak mam siÄ™ do Pana/Pani zwracaÄ‡?"</p>
                    <input type="text" placeholder="ImiÄ™ i nazwisko" value={clientData.name} onChange={(e) => setClientData({...clientData, name: e.target.value})} className="input" />
                    <button onClick={() => goToStage('qualification-property', '', 'Zbierzono imiÄ™')} className="button primary">Dalej: Typ nieruchomoÅ›ci</button>
                </div>
            );

            const QualificationPropertyScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4">4b. Kwalifikacja - Typ NieruchomoÅ›ci</h3>
                    <p className="mb-4">ğŸ’¬ ZAPYTAJ: "Mieszkacie PaÅ„stwo w mieszkaniu czy w domu jednorodzinnym?"</p>
                    <div className="grid grid-cols-2 gap-3">
                        <button onClick={() => setClientData({...clientData, propertyType: 'mieszkanie'})} className={`button ${clientData.propertyType === 'mieszkanie' ? 'primary' : 'secondary'}`}>
                            ğŸ¢ Mieszkanie
                        </button>
                        <button onClick={() => setClientData({...clientData, propertyType: 'dom'})} className={`button ${clientData.propertyType === 'dom' ? 'primary' : 'secondary'}`}>
                            ğŸ  Dom
                        </button>
                    </div>
                    {clientData.propertyType === 'dom' && <div className="tip">âœ… Dom = ulga termomodernizacyjna do 7300 zÅ‚!</div>}
                    <button onClick={() => goToStage('qualification-area', '', 'Zbierzono typ')} className="button primary" disabled={!clientData.propertyType}>Dalej: Powierzchnia</button>
                </div>
            );

            const QualificationAreaScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4">4c. Kwalifikacja - Powierzchnia</h3>
                    <p className="mb-4">ğŸ’¬ ZAPYTAJ: "Jaka jest mniej wiÄ™cej powierzchnia?"</p>
                    <input type="number" placeholder="Powierzchnia w mÂ²" value={clientData.area} onChange={(e) => setClientData({...clientData, area: e.target.value})} className="input" />
                    {clientData.area && <div className="tip">ğŸ’¡ "Ok, {clientData.area}mÂ² - to oznacza {calculations.rekuperatorCount} rekuperator{calculations.rekuperatorCount > 1 ? 'y' : ''}."</div>}
                    <button onClick={() => goToStage('qualification-bill', '', 'Zbierzono metraÅ¼')} className="button primary" disabled={!clientData.area}>Dalej: Rachunki</button>
                </div>
            );

            const QualificationBillScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4">4d. Kwalifikacja - Rachunki</h3>
                    <p className="mb-4">ğŸ’¬ ZAPYTAJ: "Ile mniej wiÄ™cej pÅ‚acÄ… PaÅ„stwo miesiÄ™cznie za ogrzewanie i prÄ…d?"</p>
                    <input type="number" placeholder="Rachunki w zÅ‚/miesiÄ…c" value={clientData.monthlyBill} onChange={(e) => setClientData({...clientData, monthlyBill: e.target.value})} className="input" />
                    {clientData.monthlyBill && <div className="tip">ğŸ’¡ "{clientData.monthlyBill} zÅ‚/mc = {Math.round(calculations.savings)} zÅ‚ oszczÄ™dnoÅ›ci."</div>}
                    <button onClick={() => goToStage('qualification-problems', '', 'Zbierzono rachunki')} className="button primary" disabled={!clientData.monthlyBill}>Dalej: Problemy</button>
                </div>
            );

            const QualificationProblemsScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4">4e. Kwalifikacja - Problemy</h3>
                    <p className="mb-4">ğŸ’¬ ZAPYTAJ: "Czy borykajÄ… siÄ™ PaÅ„stwo z ktÃ³rymÅ› z tych problemÃ³w?"</p>
                    <div>
                        {['Wysokie rachunki', 'WilgoÄ‡/pleÅ›Å„', 'Zapachy/dusznoÅ›Ä‡', 'Alergeny', 'NierÃ³wnomierna temperatura'].map(problem => (
                            <label key={problem} className="checkbox">
                                <input type="checkbox" checked={clientData.problems.includes(problem)} onChange={(e) => {
                                    setClientData({...clientData, problems: e.target.checked ? [...clientData.problems, problem] : clientData.problems.filter(p => p !== problem)});
                                }} />
                                <span>{problem}</span>
                            </label>
                        ))}
                    </div>
                    <button onClick={() => { setShowCalculator(true); goToStage('presentation-paint', '', 'Zbierzono problemy'); }} className="button primary" disabled={clientData.problems.length === 0}>Dalej: Prezentacja Farby</button>
                    {showCalculator && (
                        <div className="tip">
                            <h4>Kalkulator:</h4>
                            <p>Rekuperatory: {calculations.rekuperatorCount} szt. ({calculations.rekuperatorCost.toFixed(0)} zÅ‚)</p>
                            <p>Farba PSC: {calculations.pscLiters.toFixed(0)} L ({calculations.pscCost.toFixed(0)} zÅ‚)</p>
                            <p>Total: {calculations.totalKomfort.toFixed(0)} zÅ‚ | OszczÄ™dnoÅ›ci: {Math.round(calculations.annualSavings)} zÅ‚/rok | ROI: {calculations.roi.toFixed(1)} lat</p>
                        </div>
                    )}
                </div>
            );

            // Rozbita prezentacja
            const PresentationPaintScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4">5a. Prezentacja - Farba PSC</h3>
                    <div className="script">
                        <strong>"Pakiet Komfort zaczyna siÄ™ od farby termoizolacyjnej PSC Interior - ceramiczne mikrosfery odbijajÄ… ciepÅ‚o. Efekt? +2Â°C bez dodatkowych kosztÃ³w."</strong>
                    </div>
                    <div className="tip">PodkreÅ›l badania: +2Â°C potwierdzone.</div>
                    <button onClick={() => goToStage('presentation-rekuperator', '', 'Prezentacja farby OK')} className="button primary">Dalej: Rekuperatory</button>
                    <button onClick={() => goToStage('objection-price', '', 'Obiekcja w farbie')} className="button danger">ğŸ’° "Za drogo"</button>
                </div>
            );

            const PresentationRekuperatorScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4">5b. Prezentacja - Rekuperatory</h3>
                    <div className="script">
                        <strong>"NastÄ™pnie {calculations.rekuperatorCount} rekuperatorÃ³w EasyEko - odzyskujÄ… 90% ciepÅ‚a, filtry HEPA na alergeny."</strong>
                    </div>
                    <div className="tip">ÅšwieÅ¼e powietrze bez strat.</div>
                    <button onClick={() => goToStage('presentation-costs', '', 'Prezentacja rekuperatorÃ³w OK')} className="button primary">Dalej: Koszty</button>
                    <button onClick={() => goToStage('objection-belief', '', 'Obiekcja w rekuperatorach')} className="button danger">âŒ "Nie wierzÄ™"</button>
                </div>
            );

            const PresentationCostsScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4">5c. Prezentacja - Koszty i OszczÄ™dnoÅ›ci</h3>
                    <div className="script">
                        <strong>"CaÅ‚oÅ›Ä‡: {calculations.totalKomfort.toFixed(0)} zÅ‚. OszczÄ™dnoÅ›ci: {Math.round(calculations.savings)} zÅ‚/mc. ROI: {calculations.roi.toFixed(1)} lat."</strong>
                    </div>
                    <div className="tip">To inwestycja, nie koszt!</div>
                    <button onClick={() => goToStage('closing-hard', '', 'Prezentacja kosztÃ³w OK')} className="button primary">Do ZamkniÄ™cia</button>
                    <button onClick={() => goToStage('objection-think', '', 'Obiekcja: MuszÄ™ pomyÅ›leÄ‡')} className="button danger">ğŸ¤” "MuszÄ™ pomyÅ›leÄ‡"</button>
                </div>
            );

            // Rozszerzone obiekcje - kaÅ¼da jako oddzielna podstrona
            const ObjectionTimeScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "Nie mam czasu"</h3>
                    <AlertCircle className="inline" style={{ color: '#ef4444' }} />
                    <div className="script mt-4">
                        <strong>ODPOWIEDÅ¹ #1:</strong> "Rozumiem! Kiedy lepszy moment? DziÅ› o 19:00 czy jutro o 10:00?"
                        <br /><br />
                        <strong>ODPOWIEDÅ¹ #2:</strong> "ZajmÄ™ 60 sekund. JeÅ›li bez sensu - rozÅ‚Ä…czamy siÄ™. Zgoda?"
                    </div>
                    <div className="tip">Daj konkretne opcje.</div>
                    <button onClick={() => goToStage('qualification-name', '', 'Obiekcja czasu obsÅ‚uÅ¼ona')} className="button primary">âœ… ObsÅ‚uÅ¼one - Kontynuuj</button>
                    <button onClick={() => goToStage('closing-emergency', '', 'ZakoÅ„cz rozmowÄ™')} className="button danger">âŒ ZakoÅ„cz</button>
                </div>
            );

            const ObjectionInterestScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "Nie interesuje mnie"</h3>
                    <AlertCircle className="inline" style={{ color: '#ef4444' }} />
                    <div className="script mt-4">
                        <strong>"Co konkretnie nie interesuje? OszczÄ™dnoÅ›ci czy powietrze?"</strong>
                    </div>
                    <div className="tip">To otwiera rozmowÄ™.</div>
                    <button onClick={() => goToStage('qualification-name', '', 'Obiekcja zainteresowania obsÅ‚uÅ¼ona')} className="button primary">âœ… Kontynuuj</button>
                    <button onClick={() => goToStage('closing-emergency', '', 'ZakoÅ„cz')} className="button danger">âŒ ZakoÅ„cz</button>
                </div>
            );

            const ObjectionPriceScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "Za drogo"</h3>
                    <DollarSign className="inline" style={{ color: '#ef4444' }} />
                    <div className="script mt-4">
                        <strong>"Wielu czuÅ‚o to samo. Ale {calculations.annualSavings.toFixed(0)} zÅ‚ oszczÄ™dnoÅ›ci rocznie - to inwestycja."</strong>
                        <br /><br />
                        <strong>Rozbij: {Math.round(calculations.totalKomfort / 240)} zÅ‚/dzieÅ„. Mniej niÅ¼ kawa!</strong>
                    </div>
                    <div className="tip">Feel-Felt-Found.</div>
                    <button onClick={() => goToStage('closing-soft', '', 'Obiekcja ceny obsÅ‚uÅ¼ona')} className="button primary">âœ… Do miÄ™kkiego zamkniÄ™cia</button>
                    <button onClick={() => goToStage('presentation-costs', '', 'WrÃ³Ä‡ do kosztÃ³w')} className="button secondary">ğŸ”„ WrÃ³Ä‡</button>
                </div>
            );

            const ObjectionBeliefScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "Nie wierzÄ™"</h3>
                    <AlertCircle className="inline" style={{ color: '#ef4444' }} />
                    <div className="script mt-4">
                        <strong>"Rozumiem! Audyt Kowalskich: 680â†’470 zÅ‚/mc. Certyfikat TÃœV + gwarancja."</strong>
                    </div>
                    <div className="tip">Dowody + gwarancja.</div>
                    <button onClick={() => goToStage('closing-hard', '', 'Obiekcja wiary obsÅ‚uÅ¼ona')} className="button primary">âœ… Do twardego zamkniÄ™cia</button>
                    <button onClick={() => goToStage('presentation-rekuperator', '', 'WrÃ³Ä‡ do rekuperatorÃ³w')} className="button secondary">ğŸ”„ WrÃ³Ä‡</button>
                </div>
            );

            const ObjectionThinkScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "MuszÄ™ pomyÅ›leÄ‡"</h3>
                    <AlertCircle className="inline" style={{ color: '#ef4444' }} />
                    <div className="script mt-4">
                        <strong>"Co niepokoi? Cena czy dziaÅ‚anie?"</strong>
                        <br /><br />
                        <strong>Albo: "RezerwujÄ™ termin: jutro 16:00 czy piÄ…tek 10:00?"</strong>
                    </div>
                    <div className="tip">Odkryj prawdziwÄ… obiekcjÄ™.</div>
                    <button onClick={() => goToStage('objection-price', '', 'Prawdziwa obiekcja: Cena')} className="button danger">ğŸ’° Cena</button>
                    <button onClick={() => goToStage('objection-belief', '', 'Prawdziwa obiekcja: Wiara')} className="button danger">âŒ Wiara</button>
                    <button onClick={() => goToStage('closing-soft', '', 'UmÃ³w follow-up')} className="button primary">ğŸ“§ Follow-up</button>
                </div>
            );

            // Rozbite zamkniÄ™cia
            const ClosingHardScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4 text-green-600">6a. ZamkniÄ™cie Twarde</h3>
                    <Target className="inline" style={{ color: '#10b981' }} />
                    <div className="script">
                        <strong>"NastÄ™pny krok: darmowa diagnoza z termowizjÄ…. Jutro 16:00 czy piÄ…tek 10:00?"</strong>
                    </div>
                    <div className="tip">ZakÅ‚adaj zgodÄ™ - wybÃ³r A/B.</div>
                    <button onClick={() => alert('UmÃ³wiono spotkanie!')} className="button primary">âœ… UmÃ³wiono</button>
                    <button onClick={() => goToStage('closing-soft', '', 'PrzejdÅº do miÄ™kkiego')} className="button secondary">ğŸ”„ MiÄ™kkie</button>
                </div>
            );

            const ClosingSoftScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4 text-blue-600">6b. ZamkniÄ™cie MiÄ™kkie</h3>
                    <MessageSquare className="inline" style={{ color: '#3b82f6' }} />
                    <div className="script">
                        <strong>"WyÅ›lÄ™ kalkulacjÄ™ mailowo. ZadzwoniÄ™ za 2 dni. Adres email?"</strong>
                    </div>
                    <div className="tip">Krok po kroku.</div>
                    <input type="email" placeholder="Email klienta" className="input" />
                    <button onClick={() => alert('WysÅ‚ano materiaÅ‚y!')} className="button primary">ğŸ“§ WysÅ‚ano</button>
                </div>
            );

            const ClosingEmergencyScreen = () => (
                <div className="card">
                    <h3 className="text-2xl font-bold mb-4 text-gray-600">6c. ZamkniÄ™cie Awaryjne</h3>
                    <Clock className="inline" style={{ color: '#6b7280' }} />
                    <div className="script">
                        <strong>"Rozumiem. Zapisz numer: +48 502 963 879. ZadzwoniÄ™ za 3 miesiÄ…ce?"</strong>
                    </div>
                    <div className="tip">Pozostaw kontakt.</div>
                    <button onClick={() => goToStage('start', '', 'Rozmowa zakoÅ„czona')} className="button secondary">ğŸ”„ Nowa rozmowa</button>
                </div>
            );

            const Sidebar = () => (
                <div className="grid grid-cols-1 gap-4">
                    <div className="card">
                        <h3 className="font-bold mb-3"><MessageSquare className="inline w-5 h-5" /> Notatki</h3>
                        <textarea value={notes} onChange={(e) => setNotes(e.target.value)} className="input notes" placeholder="Zapisuj notatki..." />
                    </div>
                    <div className="card">
                        <h3 className="font-bold mb-3"><Clock className="inline w-5 h-5" /> Historia</h3>
                        <div className="history">
                            {history.map((item, idx) => <div key={idx} className="history-item">{item.time} - {item.action}</div>)}
                        </div>
                    </div>
                </div>
            );

            const renderStage = () => {
                const stages = {
                    start: <StartScreen />,
                    profile: <ProfileScreen />,
                    'opening-warm': <OpeningWarmScreen />,
                    'opening-cold': <OpeningColdScreen />, // Dodane dla kompletnoÅ›ci, choÄ‡ nie uÅ¼ywane bezpoÅ›rednio
                    'qualification-name': <QualificationNameScreen />,
                    'qualification-property': <QualificationPropertyScreen />,
                    'qualification-area': <QualificationAreaScreen />,
                    'qualification-bill': <QualificationBillScreen />,
                    'qualification-problems': <QualificationProblemsScreen />,
                    'presentation-paint': <PresentationPaintScreen />,
                    'presentation-rekuperator': <PresentationRekuperatorScreen />,
                    'presentation-costs': <PresentationCostsScreen />,
                    'objection-time': <ObjectionTimeScreen />,
                    'objection-interest': <ObjectionInterestScreen />,
                    'objection-price': <ObjectionPriceScreen />,
                    'objection-belief': <ObjectionBeliefScreen />,
                    'objection-think': <ObjectionThinkScreen />,
                    'closing-hard': <ClosingHardScreen />,
                    'closing-soft': <ClosingSoftScreen />,
                    'closing-emergency': <ClosingEmergencyScreen />
                };
                return stages[stage] || <StartScreen />;
            };

            return (
                <div className="container">
                    <div className="card">
                        <div className="header">
                            <div className="flex items-center gap-3">
                                <Phone style={{ color: '#10b981' }} />
                                <div>
                                    <h1 className="text-2xl font-bold">Interaktywny Skrypt</h1>
                                    <p className="text-sm text-gray-600">Zdrowe Mieszkanie+ by 4-eco</p>
                                </div>
                            </div>
                            {clientData.name && <div><div className="text-sm text-gray-600">Klient:</div><div className="font-bold">{clientData.name}</div></div>}
                        </div>
                        <div className="progress">
                            <span className={`step ${['profile', 'opening', 'qualification', 'presentation', 'closing', 'objection'].some(s => stage.startsWith(s)) ? 'active' : ''}`}>Profil</span>
                            <ChevronRight className="w-4 h-4 text-gray-400" />
                            <span className={`step ${['opening', 'qualification', 'presentation', 'closing', 'objection'].some(s => stage.startsWith(s)) ? 'active' : ''}`}>Otwarcie</span>
                            <ChevronRight className="w-4 h-4 text-gray-400" />
                            <span className={`step ${['qualification', 'presentation', 'closing', 'objection'].some(s => stage.startsWith(s)) ? 'active' : ''}`}>Kwalifikacja</span>
                            <ChevronRight className="w-4 h-4 text-gray-400" />
                            <span className={`step ${['presentation', 'closing', 'objection'].some(s => stage.startsWith(s)) ? 'active' : ''}`}>Prezentacja</span>
                            <ChevronRight className="w-4 h-4 text-gray-400" />
                            <span className={`step ${stage.startsWith('closing') ? 'active' : ''}`}>ZamkniÄ™cie</span>
                        </div>
                    </div>
                    {renderStage()}
                    <Sidebar />
                    <div className="text-center mt-6 text-sm text-gray-600">
                        <p>ğŸ“§ seweryn.kolodziej@4-eco.pl | ğŸ“± +48 502 963 879 | ğŸŒ www.4-eco.pl</p>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<InteractiveCallScript />, document.getElementById('root'));
    </script>
</body>
</html>