<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktywny Skrypt Rozmowy</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; background: #f5f7fa; }
        .container { max-width: 600px; margin: 40px auto; padding: 16px; }
        .card { background: white; border-radius: 8px; box-shadow: 0 4px 16px rgba(0,0,0,0.08); padding: 20px; margin-bottom: 20px; }
        .header { margin-bottom: 12px; }
        .button { padding: 10px 16px; border: none; border-radius: 6px; cursor: pointer; margin: 8px 0; background: #10b981; color: white; font-weight: bold; }
        .button.secondary { background: #888;}
        .input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px;}
        .tip { background: #fffbe5; border-left: 3px solid #ffd700; padding: 10px; margin: 10px 0; border-radius: 6px; font-size: 0.9em; }
        .history { background: #f3f3f7; padding: 8px; border-radius: 5px; font-size: 0.95em; margin-top: 10px;}
        .history-item { color: #555; margin-bottom: 2px; }
        textarea { width: 100%; border-radius: 5px; border: 1px solid #ddd; padding: 8px; margin-bottom: 10px;}
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">

function SkryptRozmowy() {
  const [etap, setEtap] = React.useState('start');
  const [profil, setProfil] = React.useState('');
  const [notatki, setNotatki] = React.useState('');
  const [klient, setKlient] = React.useState({ imie: '', typ: '', metraz: '', rachunek: '', problemy: [] });
  const [historia, setHistoria] = React.useState([]);

  function dodajDoHistorii(tekst) {
    setHistoria(h => h.concat([{ czas: new Date().toLocaleTimeString(), tekst }]));
  }

  function przejdzDoEtapu(nowy, akcja) {
    setEtap(nowy);
    if (akcja) dodajDoHistorii(akcja);
  }

  function Start() {
    return (
      <div className="card">
        <div className="header">
          <h2>Zdrowe Mieszkanie+</h2>
          <div className="tip">
            <strong>Cel rozmowy:</strong>
            <ul>
              <li>Umówić spotkanie diagnostyczne</li>
              <li>Zamknięcie sprzedaży</li>
              <li>Pozostawić kontakt na przyszłość</li>
            </ul>
          </div>
        </div>
        <div>
          <div style={{marginBottom:8}}>Typ kontaktu:</div>
          <button className="button secondary" onClick={() => przejdzDoEtapu('profil', 'Wybrano kontakt ciepły')}>Ciepły</button>
          <button className="button secondary" onClick={() => przejdzDoEtapu('profil', 'Wybrano kontakt zimny')}>Zimny</button>
        </div>
      </div>
    );
  }

  function Profil() {
    return (
      <div className="card">
        <h3>Profil Klienta</h3>
        <div style={{display:'flex', flexWrap:'wrap', gap:8}}>
          <button className="button secondary" style={{flex:1}}
            onClick={()=>{ setProfil('rodzina'); przejdzDoEtapu('imie', 'Profil: Rodzina'); }}>
            Rodzina
          </button>
          <button className="button secondary" style={{flex:1}}
            onClick={()=>{ setProfil('senior'); przejdzDoEtapu('imie', 'Profil: Senior'); }}>
            Senior
          </button>
          <button className="button secondary" style={{flex:1}}
            onClick={()=>{ setProfil('eko'); przejdzDoEtapu('imie', 'Profil: Eko'); }}>
            Eko
          </button>
          <button className="button secondary" style={{flex:1}}
            onClick={()=>{ setProfil('sceptyk'); przejdzDoEtapu('imie', 'Profil: Sceptyk'); }}>
            Sceptyk
          </button>
        </div>
      </div>
    );
  }

  function Imie() {
    return (
      <div className="card">
        <h3>Imię i nazwisko</h3>
        <input className="input" placeholder="Imię i nazwisko"
          value={klient.imie} onChange={e => setKlient({...klient, imie:e.target.value})} />
        <button className="button" onClick={()=>przejdzDoEtapu('typ', 'Podał imię')}>Dalej</button>
      </div>
    );
  }

  function Typ() {
    return (
      <div className="card">
        <h3>Typ nieruchomości</h3>
        <button className="button secondary" style={{marginRight:8}}
          onClick={()=>setKlient({...klient, typ:'mieszkanie'})}>
          Mieszkanie
        </button>
        <button className="button secondary"
          onClick={()=>setKlient({...klient, typ:'dom'})}>
          Dom
        </button>
        <button className="button" disabled={!klient.typ} onClick={()=>przejdzDoEtapu('metraz', 'Podał typ')}>Dalej</button>
      </div>
    );
  }

  function Metraz() {
    return (
      <div className="card">
        <h3>Powierzchnia</h3>
        <input className="input" type="number" placeholder="Metraż w m²"
          value={klient.metraz} onChange={e => setKlient({...klient, metraz:e.target.value})} />
        <button className="button" disabled={!klient.metraz} onClick={()=>przejdzDoEtapu('rachunek', 'Podał metraż')}>Dalej</button>
      </div>
    );
  }

  function Rachunek() {
    return (
      <div className="card">
        <h3>Rachunki</h3>
        <input className="input" type="number" placeholder="Rachunek za ogrzewanie"
          value={klient.rachunek} onChange={e => setKlient({...klient, rachunek:e.target.value})} />
        <button className="button" disabled={!klient.rachunek} onClick={()=>przejdzDoEtapu('problemy', 'Podał rachunek')}>Dalej</button>
      </div>
    );
  }

  function Problemy() {
    const lista = ['Wysokie rachunki', 'Wilgoć', 'Zapachy', 'Alergie'];
    return (
      <div className="card">
        <h3>Problemy</h3>
        {lista.map(p =>
          <label key={p} style={{display:'block',marginBottom:4}}>
            <input type="checkbox" checked={klient.problemy.indexOf(p)!==-1}
              onChange={e=>{
                setKlient({
                  ...klient,
                  problemy: e.target.checked ?
                    klient.problemy.concat(p):
                    klient.problemy.filter(x=>x!==p)
                });
              }} /> {p}
          </label>
        )}
        <button className="button" disabled={klient.problemy.length===0}
          onClick={()=>przejdzDoEtapu('podsumowanie', 'Zaznaczył problemy')}>Dalej</button>
      </div>
    );
  }

  function Podsumowanie() {
    return (
      <div className="card">
        <h3>Podsumowanie</h3>
        <div><strong>Imię:</strong> {klient.imie}</div>
        <div><strong>Typ:</strong> {klient.typ}</div>
        <div><strong>Metraż:</strong> {klient.metraz} m²</div>
        <div><strong>Rachunek:</strong> {klient.rachunek} zł</div>
        <div><strong>Problemy:</strong> {klient.problemy.join(', ')}</div>
        <div className="tip">
          Zaproponuj spotkanie lub wyślij ofertę!
        </div>
        <button className="button" onClick={()=>przejdzDoEtapu('start', 'Nowa rozmowa')}>Nowa rozmowa</button>
      </div>
    );
  }

  return (
    <div className="container">
      <div className="card">
        <div className="header">
          <h2>Interaktywny Skrypt</h2>
          <div style={{fontSize:'0.95em', color:'#666'}}>Zdrowe Mieszkanie+</div>
        </div>
      </div>
      {etap==='start' && <Start/>}
      {etap==='profil' && <Profil/>}
      {etap==='imie' && <Imie/>}
      {etap==='typ' && <Typ/>}
      {etap==='metraz' && <Metraz/>}
      {etap==='rachunek' && <Rachunek/>}
      {etap==='problemy' && <Problemy/>}
      {etap==='podsumowanie' && <Podsumowanie/>}
      <div className="card">
        <div><strong>Notatki:</strong></div>
        <textarea value={notatki} onChange={e=>setNotatki(e.target.value)} placeholder="Notatki..." />
        <div><strong>Historia:</strong></div>
        <div className="history">
          {historia.map((h,i)=><div className="history-item" key={i}>{h.czas} – {h.tekst}</div>)}
        </div>
      </div>
    </div>
  );
}

ReactDOM.render(<SkryptRozmowy />, document.getElementById('root'));
</script>
</body>
</html>
