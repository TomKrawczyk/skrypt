<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktywny Skrypt Rozmowy</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; background: linear-gradient(to bottom right, #eff6ff, #f0fdf4, #ecfdf5); }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .card { background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 24px; margin-bottom: 24px; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .progress { display: flex; align-items: center; gap: 8px; font-size: 12px; margin-bottom: 20px; }
        .step { padding: 4px 8px; border-radius: 20px; background: #e5e7eb; color: #6b7280; }
        .step.active { background: #10b981; color: white; }
        .button { padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; justify-content: center; width: 100%; margin-top: 8px; }
        .button.primary { background: #10b981; color: white; }
        .button.primary:hover { background: #059669; }
        .button.secondary { background: #6b7280; color: white; }
        .button.secondary:hover { background: #4b5563; }
        .button.danger { background: #ef4444; color: white; }
        .button.danger:hover { background: #dc2626; }
        .input { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px; margin-bottom: 12px; }
        .checkbox { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .tip { background: #fef3c7; border-left: 4px solid #f59e0b; padding: 12px; border-radius: 6px; margin: 12px 0; }
        .script { background: #f3f4f6; padding: 16px; border-radius: 6px; margin: 12px 0; font-style: italic; }
        .history { max-height: 200px; overflow-y: auto; background: #f9fafb; padding: 12px; border-radius: 6px; }
        .history-item { font-size: 12px; margin-bottom: 4px; color: #6b7280; }
        .notes { height: 120px; resize: vertical; }
        .icon { width: 20px; height: 20px; }
        .text-center { text-align: center; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .font-bold { font-weight: bold; }
        .text-3xl { font-size: 2rem; }
        .text-gray-600 { color: #6b7280; }
        .text-sm { font-size: 0.875rem; }
        .text-2xl { font-size: 1.5rem; }
        .p-4 { padding: 1rem; }
        .rounded-full { border-radius: 9999px; }
        .inline { display: inline; }
        .text-red-600 { color: #ef4444; }
        .text-green-600 { color: #10b981; }
        .text-blue-600 { color: #3b82f6; }
        .text-gray-400 { color: #9ca3af; }
        .text-gray-100 { background: #f3f4f6; }
        .w-4 { width: 1rem; }
        .h-4 { height: 1rem; }
        .w-5 { width: 1.25rem; }
        .h-5 { height: 1.25rem; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        function InteractiveCallScript() {
            const [stage, setStage] = React.useState('start');
            const [subStage, setSubStage] = React.useState('');
            const [contactType, setContactType] = React.useState('');
            const [clientProfile, setClientProfile] = React.useState('');
            const [notes, setNotes] = React.useState('');
            const [clientData, setClientData] = React.useState({
                name: '', propertyType: '', area: '', monthlyBill: '', problems: []
            });
            const [history, setHistory] = React.useState([]);
            const [showCalculator, setShowCalculator] = React.useState(false);

            const calculations = React.useMemo(function() {
                const area = parseFloat(clientData.area) || 0;
                const bill = parseFloat(clientData.monthlyBill) || 0;
                const rekuperatorCount = area <= 80 ? 1 : area <= 120 ? 2 : area <= 180 ? 3 : 4;
                const rekuperatorCost = 2800 + (rekuperatorCount - 1) * 3200;
                const pscLiters = area * 0.33;
                const pscCost = pscLiters * 110;
                const totalKomfort = rekuperatorCost + pscCost + 2000;
                const savings = bill * 0.3;
                const annualSavings = savings * 12;
                const roi = totalKomfort / annualSavings || 0;
                return { rekuperatorCount, rekuperatorCost, pscCost, totalKomfort, savings, annualSavings, roi, pscLiters };
            }, [clientData.area, clientData.monthlyBill]);

            function addToHistory(action) {
                setHistory(function(prev) {
                    return prev.concat([{ time: new Date().toLocaleTimeString(), action: action }]);
                });
            }

            function goToStage(newStage, sub, action) {
                setStage(newStage);
                setSubStage(sub);
                if (action) addToHistory(action);
            }

            // Ikony z lucide (obs≈Çuga bez destrukturyzacji)
            const Phone = lucide.Phone;
            const ChevronRight = lucide.ChevronRight;
            const Calculator = lucide.Calculator;
            const AlertCircle = lucide.AlertCircle;
            const CheckCircle = lucide.CheckCircle;
            const RefreshCw = lucide.RefreshCw;
            const MessageSquare = lucide.MessageSquare;
            const Clock = lucide.Clock;
            const Target = lucide.Target;
            const DollarSign = lucide.DollarSign;
            const User = lucide.User;

            function StartScreen() {
                return (
                    <div className="card">
                        <div className="text-center">
                            <Phone style={{ width: '64px', height: '64px', color: '#10b981', display: 'block', margin: '0 auto 1rem auto' }} />
                            <h2 className="text-3xl font-bold mb-2">Zdrowe Mieszkanie+</h2>
                            <p className="text-gray-600">Interaktywny Skrypt Rozmowy</p>
                        </div>
                        <div className="tip">
                            <p><strong>üéØ Cel rozmowy:</strong></p>
                            <ul>
                                <li>‚úÖ G≈Ç√≥wny: Um√≥wiƒá spotkanie diagnostyczne</li>
                                <li>‚úÖ Idealny: Bezpo≈õrednie zamkniƒôcie sprzeda≈ºy</li>
                                <li>‚úÖ Minimalny: Pozostawiƒá kontakt na przysz≈Ço≈õƒá</li>
                            </ul>
                        </div>
                        <div>
                            <label className="font-semibold mb-2">1. Typ kontaktu:</label>
                            <div style={{ display: 'flex', gap: '8px' }}>
                                <button onClick={function() { setContactType('warm'); goToStage('profile', '', 'Wybrano kontakt ciep≈Çy'); }} className="button secondary">
                                    ‚òÄÔ∏è Ciep≈Çy
                                </button>
                                <button onClick={function() { setContactType('cold'); goToStage('profile', '', 'Wybrano kontakt zimny'); }} className="button secondary">
                                    ‚ùÑÔ∏è Zimny
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            function ProfileScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4">2. Profil Klienta</h3>
                        <p className="text-gray-600 mb-4">Wybierz typ klienta (mo≈ºesz zmieniƒá p√≥≈∫niej):</p>
                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                            <button onClick={function() { setClientProfile('family'); goToStage('opening-warm', '', 'Profil: M≈Çoda rodzina'); }} className="button secondary p-4" style={{ flex: 1 }}>
                                <div className="font-semibold mb-2">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ M≈Çoda Rodzina</div>
                                <div className="text-sm text-gray-600">Dzieci z alergiƒÖ, wilgoƒá, zapachy</div>
                            </button>
                            <button onClick={function() { setClientProfile('senior'); goToStage('opening-warm', '', 'Profil: Senior'); }} className="button secondary p-4" style={{ flex: 1 }}>
                                <div className="font-semibold mb-2">üë¥ Senior</div>
                                <div className="text-sm text-gray-600">Wysokie rachunki, emerytura</div>
                            </button>
                            <button onClick={function() { setClientProfile('eco'); goToStage('opening-warm', '', 'Profil: ≈öwiadomy ekologicznie'); }} className="button secondary p-4" style={{ flex: 1 }}>
                                <div className="font-semibold mb-2">üå± ≈öwiadomy Ekologicznie</div>
                                <div className="text-sm text-gray-600">Ekologia, warto≈õƒá nieruchomo≈õci</div>
                            </button>
                            <button onClick={function() { setClientProfile('skeptic'); goToStage('opening-warm', '', 'Profil: Sceptyk'); }} className="button secondary p-4" style={{ flex: 1 }}>
                                <div className="font-semibold mb-2">ü§î Sceptyk</div>
                                <div className="text-sm text-gray-600">Nie wierzy w obietnice</div>
                            </button>
                        </div>
                    </div>
                );
            }

            function OpeningWarmScreen() {
                const hooks = {
                    family: "Pomagamy rodzinom pozbyƒá siƒô problemu z wilgociƒÖ, ple≈õniƒÖ i alergenami - szczeg√≥lnie wa≈ºne dla dzieci z alergiƒÖ.",
                    senior: "Pomagamy obni≈ºyƒá rachunki za ogrzewanie nawet o 30% - to ≈õrednio 2000-3000 z≈Ç oszczƒôdno≈õci rocznie.",
                    eco: "Pomagamy zmniejszyƒá ≈õlad wƒôglowy domu i zwiƒôkszyƒá jego warto≈õƒá rynkowƒÖ o 10-15%.",
                    skeptic: "Realizujemy w≈Ça≈õnie projekty termomodernizacyjne w Pa≈Ñstwa okolicy z gwarancjƒÖ efektywno≈õci na pi≈õmie."
                };
                return (
                    <div className="card">
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>
                            <h3 className="text-2xl font-bold">3a. Otwarcie - Ciep≈Çy Kontakt</h3>
                            <span className="text-sm text-gray-100 px-3 py-1 rounded-full">‚è±Ô∏è 10s</span>
                        </div>
                        <div className="script">
                            <strong>"Dzie≈Ñ dobry, nazywam siƒô [Twoje Imiƒô] z firmy 4-eco. Dzwoniƒô w sprawie programu Zdrowe Mieszkanie Plus. Czy to dobry moment na kr√≥tkƒÖ rozmowƒô?"</strong>
                            <br /><br />[PAUZA] {hooks[clientProfile]}
                        </div>
                        <div className="tip">
                            <ul>
                                <li>‚Ä¢ U≈õmiechnij siƒô - s≈Çychaƒá to!</li>
                                <li>‚Ä¢ Poczekaj na odpowied≈∫</li>
                            </ul>
                        </div>
                        <button onClick={function() { goToStage('qualification-name', '', 'Klient zgodzi≈Ç siƒô'); }} className="button primary">‚úÖ "Ok, m√≥w"</button>
                        <button onClick={function() { goToStage('objection-time', '', 'Obiekcja: Nie mam czasu'); }} className="button danger">‚è∞ "Nie mam czasu"</button>
                        <button onClick={function() { goToStage('objection-interest', '', 'Obiekcja: Nie interesuje'); }} className="button danger">‚ùå "Nie interesuje mnie"</button>
                    </div>
                );
            }

            function OpeningColdScreen() {
                const hooks = {
                    family: "Pomagamy rodzinom pozbyƒá siƒô problemu z wilgociƒÖ, ple≈õniƒÖ i alergenami - szczeg√≥lnie wa≈ºne dla dzieci z alergiƒÖ.",
                    senior: "Pomagamy obni≈ºyƒá rachunki za ogrzewanie nawet o 30% - to ≈õrednio 2000-3000 z≈Ç oszczƒôdno≈õci rocznie.",
                    eco: "Pomagamy zmniejszyƒá ≈õlad wƒôglowy domu i zwiƒôkszyƒá jego warto≈õƒá rynkowƒÖ o 10-15%.",
                    skeptic: "Realizujemy w≈Ça≈õnie projekty termomodernizacyjne w Pa≈Ñstwa okolicy z gwarancjƒÖ efektywno≈õci na pi≈õmie."
                };
                return (
                    <div className="card">
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>
                            <h3 className="text-2xl font-bold">3b. Otwarcie - Zimny Kontakt</h3>
                            <span className="text-sm text-gray-100 px-3 py-1 rounded-full">‚è±Ô∏è 15s</span>
                        </div>
                        <div className="script">
                            <strong>"Dzie≈Ñ dobry, m√≥wi [Twoje Imiƒô] z firmy 4-eco. Czy rozmawiam z Panem/PaniƒÖ [Nazwisko]?"</strong>
                            <br /><br />[Potwierdzenie] <strong>"≈öwietnie! Dzwoniƒô, poniewa≈º aktualnie realizujemy w Pa≈Ñstwa rejonie program Zdrowe Mieszkanie Plus. {hooks[clientProfile]} Czy to dobry moment na kr√≥tkƒÖ rozmowƒô?"</strong>
                        </div>
                        <div className="tip">
                            <ul>
                                <li>‚Ä¢ BƒÖd≈∫ entuzjastyczny</li>
                                <li>‚Ä¢ Je≈õli "nie" - obs≈Çuguj obiekcjƒô</li>
                            </ul>
                        </div>
                        <button onClick={function() { goToStage('qualification-name', '', 'Klient zgodzi≈Ç siƒô'); }} className="button primary">‚úÖ "Tak, s≈Çucham"</button>
                        <button onClick={function() { goToStage('objection-time', '', 'Obiekcja: Nie mam czasu'); }} className="button danger">‚è∞ "Nie mam czasu"</button>
                        <button onClick={function() { goToStage('objection-interest', '', 'Obiekcja: Nie interesuje'); }} className="button danger">‚ùå "Nie interesuje mnie"</button>
                    </div>
                );
            }

            function QualificationNameScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4">4a. Kwalifikacja - Imiƒô i Nazwisko</h3>
                        <p className="mb-4">üí¨ ZAPYTAJ: "Jak mam siƒô do Pana/Pani zwracaƒá?"</p>
                        <input type="text" placeholder="Imiƒô i nazwisko" value={clientData.name} onChange={function(e){ setClientData({...clientData, name: e.target.value}); }} className="input" />
                        <button onClick={function(){ goToStage('qualification-property', '', 'Zbierzono imiƒô'); }} className="button primary">Dalej: Typ nieruchomo≈õci</button>
                    </div>
                );
            }

            function QualificationPropertyScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4">4b. Kwalifikacja - Typ Nieruchomo≈õci</h3>
                        <p className="mb-4">üí¨ ZAPYTAJ: "Mieszkacie Pa≈Ñstwo w mieszkaniu czy w domu jednorodzinnym?"</p>
                        <div style={{ display: 'flex', gap: '8px' }}>
                            <button onClick={function() { setClientData({...clientData, propertyType: 'mieszkanie'}); }} className={"button " + (clientData.propertyType === 'mieszkanie' ? 'primary' : 'secondary')}>
                                üè¢ Mieszkanie
                            </button>
                            <button onClick={function() { setClientData({...clientData, propertyType: 'dom'}); }} className={"button " + (clientData.propertyType === 'dom' ? 'primary' : 'secondary')}>
                                üè† Dom
                            </button>
                        </div>
                        {clientData.propertyType === 'dom' && <div className="tip">‚úÖ Dom = ulga termomodernizacyjna do 7300 z≈Ç!</div>}
                        <button onClick={function() { goToStage('qualification-area', '', 'Zbierzono typ'); }} className="button primary" disabled={!clientData.propertyType}>Dalej: Powierzchnia</button>
                    </div>
                );
            }

            function QualificationAreaScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4">4c. Kwalifikacja - Powierzchnia</h3>
                        <p className="mb-4">üí¨ ZAPYTAJ: "Jaka jest mniej wiƒôcej powierzchnia?"</p>
                        <input type="number" placeholder="Powierzchnia w m¬≤" value={clientData.area} onChange={function(e) { setClientData({...clientData, area: e.target.value}); }} className="input" />
                        {clientData.area && <div className="tip">üí° "Ok, {clientData.area}m¬≤ - to oznacza {calculations.rekuperatorCount} rekuperator{calculations.rekuperatorCount > 1 ? 'y' : ''}."</div>}
                        <button onClick={function() { goToStage('qualification-bill', '', 'Zbierzono metra≈º'); }} className="button primary" disabled={!clientData.area}>Dalej: Rachunki</button>
                    </div>
                );
            }

            function QualificationBillScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4">4d. Kwalifikacja - Rachunki</h3>
                        <p className="mb-4">üí¨ ZAPYTAJ: "Ile mniej wiƒôcej p≈ÇacƒÖ Pa≈Ñstwo miesiƒôcznie za ogrzewanie i prƒÖd?"</p>
                        <input type="number" placeholder="Rachunki w z≈Ç/miesiƒÖc" value={clientData.monthlyBill} onChange={function(e) { setClientData({...clientData, monthlyBill: e.target.value}); }} className="input" />
                        {clientData.monthlyBill && <div className="tip">üí° "{clientData.monthlyBill} z≈Ç/mc = {Math.round(calculations.savings)} z≈Ç oszczƒôdno≈õci."</div>}
                        <button onClick={function() { goToStage('qualification-problems', '', 'Zbierzono rachunki'); }} className="button primary" disabled={!clientData.monthlyBill}>Dalej: Problemy</button>
                    </div>
                );
            }

            function QualificationProblemsScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4">4e. Kwalifikacja - Problemy</h3>
                        <p className="mb-4">üí¨ ZAPYTAJ: "Czy borykajƒÖ siƒô Pa≈Ñstwo z kt√≥rym≈õ z tych problem√≥w?"</p>
                        <div>
                            {['Wysokie rachunki', 'Wilgoƒá/ple≈õ≈Ñ', 'Zapachy/duszno≈õƒá', 'Alergeny', 'Nier√≥wnomierna temperatura'].map(function(problem) {
                                return (
                                    <label key={problem} className="checkbox">
                                        <input type="checkbox" checked={clientData.problems.indexOf(problem) !== -1} onChange={function(e) {
                                            setClientData({...clientData, problems: e.target.checked ? clientData.problems.concat(problem) : clientData.problems.filter(function(p){return p!==problem;})});
                                        }} />
                                        <span>{problem}</span>
                                    </label>
                                );
                            })}
                        </div>
                        <button onClick={function() { setShowCalculator(true); goToStage('presentation-paint', '', 'Zbierzono problemy'); }} className="button primary" disabled={clientData.problems.length === 0}>Dalej: Prezentacja</button>
                        {showCalculator && (
                            <div className="tip">
                                <h4>Kalkulator:</h4>
                                <p>Rekuperatory: {calculations.rekuperatorCount} szt. ({calculations.rekuperatorCost.toFixed(0)} z≈Ç)</p>
                                <p>Farba PSC: {calculations.pscLiters.toFixed(0)} L ({calculations.pscCost.toFixed(0)} z≈Ç)</p>
                                <p>Total: {calculations.totalKomfort.toFixed(0)} z≈Ç | Oszczƒôdno≈õci: {Math.round(calculations.annualSavings)} z≈Ç/rok | ROI: {calculations.roi.toFixed(1)} lat</p>
                            </div>
                        )}
                    </div>
                );
            }

            function PresentationPaintScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4">5a. Prezentacja - Farba PSC</h3>
                        <div className="script">
                            <strong>"Pakiet Komfort zaczyna siƒô od farby termoizolacyjnej PSC Interior - ceramiczne mikrosfery odbijajƒÖ ciep≈Ço. Efekt? +2¬∞C bez dodatkowych koszt√≥w."</strong>
                        </div>
                        <div className="tip">Podkre≈õl badania: +2¬∞C potwierdzone.</div>
                        <button onClick={function() { goToStage('presentation-rekuperator', '', 'Prezentacja farby OK'); }} className="button primary">Dalej: Rekuperatory</button>
                        <button onClick={function() { goToStage('objection-price', '', 'Obiekcja w farbie'); }} className="button danger">üí∞ "Za drogo"</button>
                    </div>
                );
            }

            function PresentationRekuperatorScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4">5b. Prezentacja - Rekuperatory</h3>
                        <div className="script">
                            <strong>{"Nastƒôpnie " + calculations.rekuperatorCount + " rekuperator√≥w EasyEko - odzyskujƒÖ 90% ciep≈Ça, filtry HEPA na alergeny."}</strong>
                        </div>
                        <div className="tip">≈öwie≈ºe powietrze bez strat.</div>
                        <button onClick={function() { goToStage('presentation-costs', '', 'Prezentacja rekuperator√≥w OK'); }} className="button primary">Dalej: Koszty</button>
                        <button onClick={function() { goToStage('objection-belief', '', 'Obiekcja w rekuperatorach'); }} className="button danger">‚ùå "Nie wierzƒô"</button>
                    </div>
                );
            }

            function PresentationCostsScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4">5c. Prezentacja - Koszty i Oszczƒôdno≈õci</h3>
                        <div className="script">
                            <strong>{"Ca≈Ço≈õƒá: " + calculations.totalKomfort.toFixed(0) + " z≈Ç. Oszczƒôdno≈õci: " + Math.round(calculations.savings) + " z≈Ç/mc. ROI: " + calculations.roi.toFixed(1) + " lat."}</strong>
                        </div>
                        <div className="tip">To inwestycja, nie koszt!</div>
                        <button onClick={function() { goToStage('closing-hard', '', 'Prezentacja koszt√≥w OK'); }} className="button primary">Do Zamkniƒôcia</button>
                        <button onClick={function() { goToStage('objection-think', '', 'Obiekcja: Muszƒô pomy≈õleƒá'); }} className="button danger">ü§î "Muszƒô pomy≈õleƒá"</button>
                    </div>
                );
            }

            function ObjectionTimeScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "Nie mam czasu"</h3>
                        <AlertCircle className="inline" style={{ color: '#ef4444' }} />
                        <div className="script mt-4">
                            <strong>ODPOWIED≈π #1:</strong> "Rozumiem! Kiedy lepszy moment? Dzi≈õ o 19:00 czy jutro o 10:00?"
                            <br /><br />
                            <strong>ODPOWIED≈π #2:</strong> "Zajmƒô 60 sekund. Je≈õli bez sensu - roz≈ÇƒÖczamy siƒô. Zgoda?"
                        </div>
                        <div className="tip">Daj konkretne opcje.</div>
                        <button onClick={function() { goToStage('qualification-name', '', 'Obiekcja czasu obs≈Çu≈ºona'); }} className="button primary">‚úÖ Obs≈Çu≈ºone - Kontynuuj</button>
                        <button onClick={function() { goToStage('closing-emergency', '', 'Zako≈Ñcz rozmowƒô'); }} className="button danger">‚ùå Zako≈Ñcz</button>
                    </div>
                );
            }

            function ObjectionInterestScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "Nie interesuje mnie"</h3>
                        <AlertCircle className="inline" style={{ color: '#ef4444' }} />
                        <div className="script mt-4">
                            <strong>"Co konkretnie nie interesuje? Oszczƒôdno≈õci czy powietrze?"</strong>
                        </div>
                        <div className="tip">To otwiera rozmowƒô.</div>
                        <button onClick={function() { goToStage('qualification-name', '', 'Obiekcja zainteresowania obs≈Çu≈ºona'); }} className="button primary">‚úÖ Kontynuuj</button>
                        <button onClick={function() { goToStage('closing-emergency', '', 'Zako≈Ñcz'); }} className="button danger">‚ùå Zako≈Ñcz</button>
                    </div>
                );
            }

            function ObjectionPriceScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "Za drogo"</h3>
                        <DollarSign className="inline" style={{ color: '#ef4444' }} />
                        <div className="script mt-4">
                            <strong>{"Wielu czu≈Ço to samo. Ale " + calculations.annualSavings.toFixed(0) + " z≈Ç oszczƒôdno≈õci rocznie - to inwestycja."}</strong>
                            <br /><br />
                            <strong>{"Rozbij: " + Math.round(calculations.totalKomfort / 240) + " z≈Ç/dzie≈Ñ. Mniej ni≈º kawa!"}</strong>
                        </div>
                        <div className="tip">Feel-Felt-Found.</div>
                        <button onClick={function() { goToStage('closing-soft', '', 'Obiekcja ceny obs≈Çu≈ºona'); }} className="button primary">‚úÖ Do miƒôkkiego zamkniƒôcia</button>
                        <button onClick={function() { goToStage('presentation-costs', '', 'Wr√≥ƒá do koszt√≥w'); }} className="button secondary">üîÑ Wr√≥ƒá</button>
                    </div>
                );
            }

            function ObjectionBeliefScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "Nie wierzƒô"</h3>
                        <AlertCircle className="inline" style={{ color: '#ef4444' }} />
                        <div className="script mt-4">
                            <strong>{"Rozumiem! Audyt Kowalskich: 680‚Üí470 z≈Ç/mc. Certyfikat T√úV + gwarancja."}</strong>
                        </div>
                        <div className="tip">Dowody + gwarancja.</div>
                        <button onClick={function() { goToStage('closing-hard', '', 'Obiekcja wiary obs≈Çu≈ºona'); }} className="button primary">‚úÖ Do twardego zamkniƒôcia</button>
                        <button onClick={function() { goToStage('presentation-rekuperator', '', 'Wr√≥ƒá do rekuperator√≥w'); }} className="button secondary">üîÑ Wr√≥ƒá</button>
                    </div>
                );
            }

            function ObjectionThinkScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4 text-red-600">Obiekcja: "Muszƒô pomy≈õleƒá"</h3>
                        <AlertCircle className="inline" style={{ color: '#ef4444' }} />
                        <div className="script mt-4">
                            <strong>{"Co niepokoi? Cena czy dzia≈Çanie?"}</strong>
                            <br /><br />
                            <strong>Albo: "Rezerwujƒô termin: jutro 16:00 czy piƒÖtek 10:00?"</strong>
                        </div>
                        <div className="tip">Odkryj prawdziwƒÖ obiekcjƒô.</div>
                        <button onClick={function() { goToStage('objection-price', '', 'Prawdziwa obiekcja: Cena'); }} className="button danger">üí∞ Cena</button>
                        <button onClick={function() { goToStage('objection-belief', '', 'Prawdziwa obiekcja: Wiara'); }} className="button danger">‚ùå Wiara</button>
                        <button onClick={function() { goToStage('closing-soft', '', 'Um√≥w follow-up'); }} className="button primary">üìß Follow-up</button>
                    </div>
                );
            }

            function ClosingHardScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4 text-green-600">6a. Zamkniƒôcie Twarde</h3>
                        <Target className="inline" style={{ color: '#10b981' }} />
                        <div className="script">
                            <strong>{"Nastƒôpny krok: darmowa diagnoza z termowizjƒÖ. Jutro 16:00 czy piƒÖtek 10:00?"}</strong>
                        </div>
                        <div className="tip">Zak≈Çadaj zgodƒô - wyb√≥r A/B.</div>
                        <button onClick={function() { alert('Um√≥wiono spotkanie!'); }} className="button primary">‚úÖ Um√≥wiono</button>
                        <button onClick={function() { goToStage('closing-soft', '', 'Przejd≈∫ do miƒôkkiego'); }} className="button secondary">üîÑ Miƒôkkie</button>
                    </div>
                );
            }

            function ClosingSoftScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4 text-blue-600">6b. Zamkniƒôcie Miƒôkkie</h3>
                        <MessageSquare className="inline" style={{ color: '#3b82f6' }} />
                        <div className="script">
                            <strong>{"Wy≈õlƒô kalkulacjƒô mailowo. Zadzwoniƒô za 2 dni. Adres email?"}</strong>
                        </div>
                        <div className="tip">Krok po kroku.</div>
                        <input type="email" placeholder="Email klienta" className="input" />
                        <button onClick={function() { alert('Wys≈Çano materia≈Çy!'); }} className="button primary">üìß Wys≈Çano</button>
                    </div>
                );
            }

            function ClosingEmergencyScreen() {
                return (
                    <div className="card">
                        <h3 className="text-2xl font-bold mb-4 text-gray-600">6c. Zamkniƒôcie Awaryjne</h3>
                        <Clock className="inline" style={{ color: '#6b7280' }} />
                        <div className="script">
                            <strong>{"Rozumiem. Zapisz numer: +48 502 963 879. Zadzwoniƒô za 3 miesiƒÖce?"}</strong>
                        </div>
                        <div className="tip">Pozostaw kontakt.</div>
                        <button onClick={function() { goToStage('start', '', 'Rozmowa zako≈Ñczona'); }} className="button secondary">üîÑ Nowa rozmowa</button>
                    </div>
                );
            }

            function Sidebar() {
                return (
                    <div style={{ display: 'grid', gap: '16px' }}>
                        <div className="card">
                            <h3 className="font-bold mb-3"><MessageSquare className="inline w-5 h-5" /> Notatki</h3>
                            <textarea value={notes} onChange={function(e) { setNotes(e.target.value); }} className="input notes" placeholder="Zapisuj notatki..." />
                        </div>
                        <div className="card">
                            <h3 className="font-bold mb-3"><Clock className="inline w-5 h-5" /> Historia</h3>
                            <div className="history">
                                {history.map(function(item, idx) { return <div key={idx} className="history-item">{item.time} - {item.action}</div>; })}
                            </div>
                        </div>
                    </div>
                );
            }

            function renderStage() {
                var stages = {
                    start: <StartScreen />,
                    profile: <ProfileScreen />,
                    'opening-warm': <OpeningWarmScreen />,
                    'opening-cold': <OpeningColdScreen />,
                    'qualification-name': <QualificationNameScreen />,
                    'qualification-property': <QualificationPropertyScreen />,
                    'qualification-area': <QualificationAreaScreen />,
                    'qualification-bill': <QualificationBillScreen />,
                    'qualification-problems': <QualificationProblemsScreen />,
                    'presentation-paint': <PresentationPaintScreen />,
                    'presentation-rekuperator': <PresentationRekuperatorScreen />,
                    'presentation-costs': <PresentationCostsScreen />,
                    'objection-time': <ObjectionTimeScreen />,
                    'objection-interest': <ObjectionInterestScreen />,
                    'objection-price': <ObjectionPriceScreen />,
                    'objection-belief': <ObjectionBeliefScreen />,
                    'objection-think': <ObjectionThinkScreen />,
                    'closing-hard': <ClosingHardScreen />,
                    'closing-soft': <ClosingSoftScreen />,
                    'closing-emergency': <ClosingEmergencyScreen />
                };
                return stages[stage] || <StartScreen />;
            }

            return (
                <div className="container">
                    <div className="card">
                        <div className="header">
                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                                <Phone style={{ color: '#10b981' }} />
                                <div>
                                    <h1 className="text-2xl font-bold">Interaktywny Skrypt</h1>
                                    <p className="text-sm text-gray-600">Zdrowe Mieszkanie+ by 4-eco</p>
                                </div>
                            </div>
                            {clientData.name && <div><div className="text-sm text-gray-600">Klient:</div><div className="font-bold">{clientData.name}</div></div>}
                        </div>
                        <div className="progress">
                            <span className={`step ${['profile', 'opening', 'qualification', 'presentation', 'closing', 'objection'].some(function(s){return stage.startsWith(s);}) ? 'active' : ''}`}>Profil</span>
                            <ChevronRight className="w-4 h-4 text-gray-400" />
                            <span className={`step ${['opening', 'qualification', 'presentation', 'closing', 'objection'].some(function(s){return stage.startsWith(s);}) ? 'active' : ''}`}>Otwarcie</span>
                            <ChevronRight className="w-4 h-4 text-gray-400" />
                            <span className={`step ${['qualification', 'presentation', 'closing', 'objection'].some(function(s){return stage.startsWith(s);}) ? 'active' : ''}`}>Kwalifikacja</span>
                            <ChevronRight className="w-4 h-4 text-gray-400" />
                            <span className={`step ${['presentation', 'closing', 'objection'].some(function(s){return stage.startsWith(s);}) ? 'active' : ''}`}>Prezentacja</span>
                            <ChevronRight className="w-4 h-4 text-gray-400" />
                            <span className={`step ${stage.startsWith('closing') ? 'active' : ''}`}>Zamkniƒôcie</span>
                        </div>
                    </div>
                    {renderStage()}
                    <Sidebar />
                </div>
            );
        }

        ReactDOM.render(<InteractiveCallScript />, document.getElementById('root'));
    </script>
</body>
</html>
